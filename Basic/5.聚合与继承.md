## 聚合与继承 ##

当把 Maven 应用到实际项目的时候，需要将项目分成不同的模块，以得到更清晰的设计及更高的重用性。

Maven 的 **聚合** 特性能够把项目的各个模块聚合在一起构建，而 **继承** 特性则能帮助抽取各模块相同的依赖和插件等配置，在简化 POM 的同时，还能促进各个模块配置的一致性。

一般来说，一个项目的子模块都应该使用同样的 `groupid`，如果它们一起开发和发布，还应该使用同样的 `version`，此外它们的 `artifactId` 还应该使用一致的前缀，以方便同其他项目区分。


### 聚合 ###

如果想要一次构建多个模块，而不是到每个模块的目录下分别执行 `mvn` 命令，就可以使用 Maven 聚合特性（或称为多模块）。

聚合模块本身作为一个 Maven 项目，必须要有自己的 POM，不过作为一个聚合项目，其 POM 又有特殊的地方。详见 Basic/pom.xml。

一般来说，为了方便快速定位内容，模块所处的目录名称应当与其 `artifactId` 一致，不过这并不是 Maven 的要求。

为了方便构建项目，通常将聚合模块放在项目目录的最顶层，其他模块则作为聚合模块的子目录存在。如果使用平行目录结构，聚合模块的 POM 也需要做相应的修改，以指向正确的模块目录（可以使用 ../ 之类的相对路径）。

聚合模块仅仅是帮助聚合其他模块构建的工具，它自身并无实质的内容（如 `src/main/java`）。

构建时，Maven 会首先解析聚合模块的 POM、分析要构建的模块、并计算出一个反应堆构建顺序，然后根据这个顺序依次构建各个模块。

### 继承 ###

Maven 的 POM 继承机制能够抽取出重复的配置，消除重复。在父 POM 中声明一些配置供子 POM 继承，以实现“一处声明多处使用”的目的。


作为父模块的 POM，其打包类型必须为 pom。由于父模块只是为了帮助消除配置的重复，因此它本身不包含除 POM 之外的项目文件，也就不需要 `src/main/java` 之类的文件夹了。

一旦有了父模块，就需要让其他模块来继承它。详见 Basic/basic_util/pom.xml。

### 总结 ###

聚合主要是为了方便快速构建项目，而继承主要是为了消除重复配置。对于聚合模块来说，它知道哪些模块被聚合了，但那些被聚合的模块不知道这个聚合模块的存在。对于继承关系的父 POM 来说，它不知道有哪些子模块继承于它，但那些子模块都必须知道自己的父 POM 是什么。

实际使用中，往往一个 POM 即是聚合 POM 又是父 POM，这么做主要是为了方便。一般来说，融合使用聚合和继承也没什么问题。
